<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mapbox Main Exercise </title>
<!--    mapBox CSS-->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />
</head>
<body>
<h1>My favorite restaurants!</h1>




<div id='map' style='width: 100%; height: 70vh;'></div>




<!--MapBox api-->
<script src="js/keys.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js'></script>
<script src="js/mapbox-utils.js"></script>

<script>
    // MapBox
    mapboxgl.accessToken = mapBoxToken;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 6,
        // center: [-122.420679, 37.772537] // San Francisco
        // center: [-98.4916, 29.4252] // San Antonio
        // center: [-77.0369, 38.9072] // Washington D.C
        center: [-97.7718784, 31.0810943] // Killeen, TX


    });



    // ====================
var favRestaurants = [
    {
        restaurantName: "La Panaderia Bakery Cafe",
        address: "301 E Houston St, San Antonio, TX 78205",
        location:[-98.4965739, 29.432991],
        phone: "(210) 227-2683"
    },
    {
        restaurantName: "Odd Duck",
        address: "1201 S Lamar Blvd, Austin, TX 78704",
        location:[-98.4476835, 29.9035974],
        phone: "(512) 433-6521"
    },
    {
        restaurantName: "Knife Dallas",
        address: "5300 E Mockingbird Ln, Dallas, TX 75206",
        location:[-96.801746, 32.8093984],
        phone: "(214) 443-9339"
    }];

    // console.log(favRestaurants[0].address);
    //
    // function geoPen(array){
    //     // Marker
    //     var marker = new mapboxgl.Marker()
    //     // marker.setLngLat([-98.4916, 29.4260]); //Alamo location
    //         .setLngLat(array.location)
    //         .setPopup(favRestaurants)
    //         .addTo(map);
    //
    //
    //     // PopUp
    //     var favRestaurants = new mapboxgl.Popup()
    //         .setHTML(array.restaurantName + "<br>" + array.address + "<br>" + array.phone);
    //
    //     marker.setPopup(favRestaurants);
    //
    // }

    function geoPen(object){
        // Marker
        var marker = new mapboxgl.Marker()
        // marker.setLngLat([-98.4916, 29.4260]); //Alamo location
            .setLngLat(object.location)
            // .setPopup(popUp)
            .addTo(map);


        // PopUp
        var popUp = new mapboxgl.Popup()
            .setHTML(array.restaurantName + "<br>" + object.address + "<br>" + object.phone);

        marker.setPopup(popUp);

    }



    favRestaurants.forEach(geoPen);

    favRestaurants.forEach(function (rest) {
        geoPen(rest)

    })



</script>



</body>
</html>


